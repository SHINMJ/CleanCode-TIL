# TIL 2022.05.06

## 오늘 읽은 범위

### **7장 오류처리**

## 기억하고 싶은 내용 & 생각

### 뭔가 잘못되면 바로 잡을 책임은 바로 우리 프로그래머에게 있다.<130p>

책임 의식, 주인 의식을 가지고 소프트웨어를 만들어야 한다. 당연한 애기인데 잊어버리기 쉽다.
다년간 나는 그런 프로그래머가 아니었던 것 같다. 단순 코더랄까.
시간이 지나고 연차가 차고 여러 프로젝트를 경험하면서 그리고 클린코드와 같은 책들을 읽으면서 반성을 많이 했다.
반성도하고 배우는 것도 많고.. 점차 소프트웨어 장인의 길로 가고 있는 것 같다.

## 우아하고 고상하게 오류를 처리하는 기법

    핵심은 비지니스 로직과 오류처리를 분리하는 것!!!

### 오류코드보다 예외를 사용하라.

코드가 깔끔해진다. 항상 예외를 사용하도록 해야한다.

### try-catch-finally문 부터 작성하라

먼저 예외가 발생하도록 테스트 코드를 작성하고 테스트가 성공하도록 예외에 대한 코드를 작성한다.
오류를 제외하고 TDD로 코드를 짠다. -> 범위내에서 트랜잭션 본질을 유지하기 쉬워진다.

### unchecked 예외를 사용하라

확인된 예외는 ocp를 위반한다. -> 최하위부터 최상위까지 연쇄적인 수정이 일어난다.

### 예외에 의미를 제공하라

호출스택만으로 사용자가 오류를 파악하기 어렵다.
구체적으로 예외 클래스를 정의하고 메세지를 명확하게 전달하도록 한다.

### 호출자를 고려해 예외 클래스를 정의하라

오류를 정의할 때 오류를 잡아내는 방법을 고려해야 한다!!
외부 api의 다양한 예외를 직접 노출하지 않고 warpper 클래스를 통해 캡슐화한다.

### 정상흐름을 정의하라

중단이 적합하지 않은 경우!! 특수사례 패턴을 사용한다.

### null을 반환하지 마라

null을 반환한다는 건 책임을 클라이언트에 미루는 것이다!!!
null을 반환하고 싶은 유혹이 든다면?

- 예외를 던지거나
- 특수사례 객체를 반환한다.
- 외부 api가 null을 반환한다면 wrapper 객체를 고려하라.

### null을 전달하지 마라

null은 나쁘다. 정책적으로 null을 전달하지 못하도록 하는 것이 가장 낫다!!

### 깨끗한 코드는 읽기도 좋아야 하지만 안정성도 높아야 한다.

## 오늘 읽은 소감

생각해보면 당연한 애기이다. 오류를 처리하는 것은 중요하다. 잘 처리해야 한다.
프로그래머로써 일을 시작하면서 들어왔던 애기이다. 오류 처리를 잘해야 한다고..
하지만 잘 처리된 예제를 현업에서 많이 보지 못했던 것 같다.
거의 대부분 `BusinessException(혹은 이와 비슷한 이름)` 이라는 클래스를 하나 만들어서 모든 예외를 그걸로 처리했던 것 같다.
하지만 명확하게 예외에 대해 의미를 제공하고 혹은 wrapper 클래스로 감싸거나 특수사례 패턴을 사용하여 좀 더 상황에 맞게 처리해야 했다는 것을 이제야 깨닫는다.
`BusinessException` 으로 퉁치지 말고 명확하게 `InvalidArgumentException` 과 같이 어떤 오류에 대한 예외 클래스인지 이름을 명확하게 짓고 메세지를 명확하게 전달할 수 있도록 해야한다.

## 궁금한 내용 or 잘 이해되지 않는 내용

### 특수사례 패턴

특정 사례에 대해 특수한 동작을 제공하도록 하위 클래스를 정의한다.

### checked exception vs unchecked exception

`RuntimeException` 을 상속하면 unchecked exception, 상속하지 않으면 checked exception!!
checked exception은 반드시 에러 처리를 해야 한다.
반면 unchecked exception은 에러 처리를 강제하지 않는다. -> Runtime exception은 개발자들의 실수로 발생하는 것들이기 때문에 에러를 강제하지 않는다!
